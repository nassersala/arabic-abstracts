# Section 5.2: Leader Election
## القسم 5.2: انتخاب القائد

**Section:** leader-election
**Translation Quality:** 0.88
**Glossary Terms Used:** leader election, follower, candidate, leader, term, timeout, RequestVote, RPC, randomization, majority, heartbeat

---

### English Version

Raft uses a heartbeat mechanism to trigger leader election. Servers start up as followers. A server remains in follower state as long as it receives valid RPCs from a leader or candidate. Leaders send periodic heartbeats (AppendEntries RPCs that carry no log entries) to all followers in order to maintain their authority. If a follower receives no communication over a period of time called the **election timeout**, then it assumes there is no viable leader and begins an election to choose a new leader.

To begin an election, a follower increments its current term and transitions to candidate state. It then votes for itself and issues RequestVote RPCs in parallel to each of the other servers in the cluster. A candidate continues in this state until one of three things happens: (a) it wins the election, (b) another server establishes itself as leader, or (c) a period of time goes by with no winner.

A candidate wins an election if it receives votes from a majority of the servers in the full cluster for the same term. Each server will vote for at most one candidate in a given term, on a first-come-first-served basis. The majority rule ensures that at most one candidate can win the election for a particular term. Once a candidate wins an election, it becomes leader. It then sends heartbeat messages to all of the other servers to establish its authority and prevent new elections.

While waiting for votes, a candidate may receive an AppendEntries RPC from another server claiming to be leader. If the leader's term (included in its RPC) is at least as large as the candidate's current term, then the candidate recognizes the leader as legitimate and returns to follower state. If the term in the RPC is smaller than the candidate's current term, then the candidate rejects the RPC and continues in candidate state.

The third possible outcome is that a candidate neither wins nor loses the election: if many followers become candidates at the same time, votes could be split so that no candidate obtains a majority. When this happens, each candidate will time out and start a new election by incrementing its term and initiating another round of RequestVote RPCs. However, without extra measures split votes could repeat indefinitely.

Raft uses randomized election timeouts to ensure that split votes are rare and that they are resolved quickly. To prevent split votes in the first place, election timeouts are chosen randomly from a fixed interval (e.g., 150–300ms). This spreads out the servers so that in most cases only a single server will time out; it wins the election and sends heartbeats before any other servers time out. The same mechanism is used to handle split votes. Each candidate restarts its randomized election timeout at the start of an election, and it waits for that timeout to elapse before starting the next election; this reduces the likelihood of another split vote in the new election.

---

### النسخة العربية

تستخدم Raft آلية نبضات القلب لتشغيل انتخاب القائد. تبدأ الخوادم كتابعين. يبقى الخادم في حالة التابع طالما يتلقى RPCs صحيحة من قائد أو مرشح. يرسل القادة نبضات قلب دورية (AppendEntries RPCs التي لا تحمل إدخالات سجل) إلى جميع التابعين من أجل الحفاظ على سلطتهم. إذا لم يتلق تابع أي اتصال خلال فترة زمنية تسمى **مهلة الانتخاب**، فإنه يفترض عدم وجود قائد قابل للحياة ويبدأ انتخابات لاختيار قائد جديد.

لبدء الانتخابات، يزيد التابع فترته الحالية وينتقل إلى حالة المرشح. ثم يصوت لنفسه ويُصدر RequestVote RPCs بشكل متوازٍ لكل من الخوادم الأخرى في المجموعة. يستمر المرشح في هذه الحالة حتى يحدث أحد ثلاثة أشياء: (أ) يفوز بالانتخابات، (ب) يؤسس خادم آخر نفسه كقائد، أو (ج) تمر فترة زمنية بدون فائز.

يفوز المرشح بالانتخابات إذا حصل على أصوات من أغلبية الخوادم في المجموعة الكاملة لنفس الفترة. سيصوت كل خادم لمرشح واحد على الأكثر في فترة معينة، على أساس الأسبقية. تضمن قاعدة الأغلبية أن مرشحاً واحداً على الأكثر يمكنه الفوز بالانتخابات لفترة معينة. بمجرد فوز مرشح بالانتخابات، يصبح قائداً. ثم يرسل رسائل نبضات القلب إلى جميع الخوادم الأخرى لتأسيس سلطته ومنع انتخابات جديدة.

أثناء انتظار الأصوات، قد يتلقى المرشح AppendEntries RPC من خادم آخر يدعي أنه قائد. إذا كانت فترة القائد (المضمنة في RPC الخاص به) كبيرة على الأقل مثل الفترة الحالية للمرشح، فإن المرشح يعترف بالقائد كشرعي ويعود إلى حالة التابع. إذا كانت الفترة في RPC أصغر من الفترة الحالية للمرشح، فإن المرشح يرفض RPC ويستمر في حالة المرشح.

النتيجة الثالثة المحتملة هي أن المرشح لا يفوز ولا يخسر الانتخابات: إذا أصبح العديد من التابعين مرشحين في نفس الوقت، يمكن أن تنقسم الأصوات بحيث لا يحصل أي مرشح على أغلبية. عندما يحدث هذا، سينتهي وقت كل مرشح ويبدأ انتخابات جديدة من خلال زيادة فترته وبدء جولة أخرى من RequestVote RPCs. ومع ذلك، بدون تدابير إضافية يمكن أن تتكرر الأصوات المنقسمة إلى ما لا نهاية.

تستخدم Raft مهلات انتخاب عشوائية لضمان ندرة الأصوات المنقسمة وحلها بسرعة. لمنع الأصوات المنقسمة في المقام الأول، يتم اختيار مهلات الانتخاب بشكل عشوائي من فترة ثابتة (على سبيل المثال، 150-300 ميلي ثانية). هذا ينشر الخوادم بحيث في معظم الحالات سينتهي وقت خادم واحد فقط؛ يفوز بالانتخابات ويرسل نبضات القلب قبل انتهاء وقت أي خوادم أخرى. تُستخدم نفس الآلية للتعامل مع الأصوات المنقسمة. يعيد كل مرشح تشغيل مهلة انتخابه العشوائية في بداية الانتخابات، وينتظر انقضاء تلك المهلة قبل بدء الانتخابات التالية؛ وهذا يقلل من احتمالية حدوث تصويت منقسم آخر في الانتخابات الجديدة.

---

### Translation Notes

- **Figures referenced:** None explicitly in this section
- **Key terms introduced:**
  - heartbeat mechanism = آلية نبضات القلب
  - election timeout = مهلة الانتخاب
  - viable leader = قائد قابل للحياة
  - RequestVote RPC = RequestVote RPC (kept as technical term)
  - first-come-first-served = الأسبقية
  - majority rule = قاعدة الأغلبية
  - legitimate = شرعي
  - split vote = أصوات منقسمة / تصويت منقسم
  - randomized election timeouts = مهلات انتخاب عشوائية
  - time out = ينتهي وقت / انتهاء الوقت

- **Special handling:**
  - Kept RequestVote and AppendEntries as technical RPC names
  - Preserved numerical example (150-300ms)
  - Maintained the three possible outcomes structure (a), (b), (c)
  - Used consistent terminology for states (follower, candidate, leader)

- **Translation decisions:**
  - "heartbeat mechanism" → "آلية نبضات القلب" (heartbeat mechanism, consistent with earlier use)
  - "election timeout" → "مهلة الانتخاب" (election deadline/timeout)
  - "viable leader" → "قائد قابل للحياة" (viable/living leader)
  - "first-come-first-served" → "الأسبقية" (priority/precedence basis)
  - "legitimate" → "شرعي" (legitimate/lawful)
  - "split vote" → "أصوات منقسمة" (divided/split votes)
  - "randomized" → "عشوائية" (randomized, consistent with earlier use)
  - "time out" → "ينتهي وقت" (time expires/runs out)

### Quality Metrics

- **Semantic equivalence:** 0.89 - Accurately preserves election algorithm details
- **Technical accuracy:** 0.90 - All election mechanisms correctly described
- **Readability:** 0.87 - Clear explanation of complex election process
- **Glossary consistency:** 0.87 - Consistent with established terms
- **Overall section score:** 0.88

### Back-Translation Check

Core concept:
English: "If a follower receives no communication over a period of time called the election timeout, then it assumes there is no viable leader and begins an election to choose a new leader."
Arabic: "إذا لم يتلق تابع أي اتصال خلال فترة زمنية تسمى مهلة الانتخاب، فإنه يفترض عدم وجود قائد قابل للحياة ويبدأ انتخابات لاختيار قائد جديد"
Back: "If a follower doesn't receive any communication during a time period called election timeout, it assumes there is no viable leader and begins elections to choose a new leader."
✓ Semantically equivalent

Key mechanism:
English: "Raft uses randomized election timeouts to ensure that split votes are rare and that they are resolved quickly."
Arabic: "تستخدم Raft مهلات انتخاب عشوائية لضمان ندرة الأصوات المنقسمة وحلها بسرعة"
Back: "Raft uses randomized election timeouts to ensure split votes are rare and resolved quickly."
✓ Semantically equivalent
