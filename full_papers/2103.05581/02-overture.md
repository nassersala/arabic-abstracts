# Section 2: Overture
## القسم 2: المقدمة التمهيدية

**Section:** overture (foundational concepts)
**Translation Quality:** 0.87
**Glossary Terms Used:** type theory, Martin-Löf Type Theory (MLTT), dependent types, Sigma types, Pi types, universe, function extensionality, equality, inverse, embedding, proof assistant

---

### English Version (Summary)

**2 Overture**

**2.1 Preliminaries**

This section presents the Overture.Preliminaries module of the AgdaUALib. Here we define or import the basic types of Martin-Löf type theory (MLTT).

**Logical foundations:** The AgdaUALib is based on a type theory that is very close to the one on which Martín Escardó's Type Topology (TypeTopo) Agda library is based. The objects and assumptions that form the foundation of MLTT are few. There are the primitive types (0, 1, and ℕ, denoting the empty type, one-element type, and natural numbers), the type formers (+, Π, Σ, Id, denoting binary sum, product, sum, and the identity type). We have an infinite collection of type universes (types of types). Following Escardó, we denote universes in the UALib by upper-case calligraphic letters: U, V, W, X, Y, Z.

The logical semantics come from the propositions-as-types correspondence: propositions and predicates are represented by types and the inhabitants of these types are the proofs of the propositions and predicates. Proofs are constructed using the type forming rules.

To this foundation, we add certain extensionality principles when needed. Classical axioms such as the Axiom of Choice or the Law of the Excluded Middle are not assumed anywhere in the library. All theorems and proofs in the UALib are constructive.

**Specifying logical foundations in Agda:** Every Agda program in the UALib begins with:
```
{-# OPTIONS --without-K --exact-split --safe #-}
```

These options control foundational assumptions:
1. --without-K disables Streicher's K axiom, making Agda compatible with proof-relevant type theories
2. --exact-split makes Agda accept only definitions that are judgmental equalities
3. --safe ensures nothing is postulated outright

**Universes in Agda:** We adopt Escardó's convention of denoting universes by capital calligraphic letters. The ⋆ operator maps a universe level U to the type Set U. Thus U⋆ is an alias for Set U.

**Dependent types:**

*Sigma types (dependent pairs):* Given universes U and V, a type A : U⋆, and a type family B : A → V⋆, the Sigma type is denoted by Σ x : A , B x and generalizes the Cartesian product A × B by allowing the type B x of the second argument to depend on the value x of the first.

*Pi types (dependent functions):* The Pi type Π x : A , B x generalizes the function type A → B by letting the type B x of the codomain depend on the value x of the domain type.

**2.2 Equality**

This section covers the fundamental notion of definitional equality in MLTT.

**Definitional equality:** Per Martin-Löf defines: "Definitional equality is the equivalence relation which is generated by the principles that a definiendum is always definitionally equal to its definiens and that definitional equality is preserved under substitution."

The datatype representing definitional equality:
```
data _≡_ {A : U⋆} : A → A → U⋆ where refl : {x : A} → x ≡ x
```

**Identity is an equivalence relation:** The relation ≡ is naturally an equivalence relation with symmetry and transitivity:
```
≡-sym : {x y : A} → x ≡ y → y ≡ x
≡-trans : {x y z : A} → x ≡ y → y ≡ z → x ≡ z
```

**Transport (substitution):** Church characterized equality by declaring two things equal if and only if no property can distinguish them. The transport function represents this:
```
transport : {A : U⋆} (B : A → W⋆) {x y : A} → x ≡ y → B x → B y
```

The ap function shows that definitional equality satisfies the substitution rule:
```
ap : {A : U⋆}{B : V⋆} (f : A → B){a b : A} → a ≡ b → f a ≡ f b
```

**2.3 Function extensionality**

What does it mean to say that two functions f g : X → Y are equal? Functions that produce the same output for the same input are extensionally equal, though they may not be intensionally equal if their internal definitions differ.

**Types for postulating function extensionality:** Pointwise equality of functions:
```
_∼_ : {A : U⋆}{B : A → W⋆} → Π B → Π B → U ⊔ W⋆
f ∼ g = ∀ x → f x ≡ g x
```

Function extensionality is the principle that pointwise equal functions are definitionally equal: ∀ f g (f ∼ g → f ≡ g). This is represented by the dfunext type for dependent functions:
```
dfunext : ∀ U W → (U ⊔ W)+⋆
dfunext U W = {A : U⋆}{B : A → W⋆}{f g : ∀(x : A) → B x} → f ∼ g → f ≡ g
```

**Important:** Function extensionality is neither provable nor disprovable in Martin-Löf type theory. It is an independent statement.

The happly function provides a converse:
```
happly : {A : U⋆}{B : A → W⋆}(f g : Π B) → f ≡ g → f ∼ g
```

An alternative formulation asserts that happly is an equivalence, using fibers and singleton types:
```
hfunext : ∀ U W → (U ⊔ W)+⋆
hfunext U W = {A : U⋆}{B : A → W⋆} (f g : Π B) → is-equiv (happly f g)
```

**2.4 Inverses**

This section defines types for inverse images, epic (surjective) functions, monic (injective) functions, and embeddings.

**Inverse images:** The Image type represents the inverse image of a function:
```
data Image_∋_ (f : A → B) : B → U ⊔ W⋆ where
  im : (x : A) → Image f ∋ f x
  eq : (b : B) → (a : A) → b ≡ f a → Image f ∋ b
```

We can compute a pseudoinverse:
```
Inv : (f : A → B){b : B} → Image f ∋ b → A
```

**Epics (surjective functions):**
```
Epic : (A → B) → U ⊔ W⋆
Epic f = ∀ y → Image f ∋ y
```

The right-inverse of an epic can be constructed:
```
EpicInv : (f : A → B) → Epic f → B → A
```

**Monics (injective functions):**
```
Monic : (g : A → B) → U ⊔ W⋆
Monic g = ∀ a1 a2 → g a1 ≡ g a2 → a1 ≡ a2
```

**Embeddings:** A function is an embedding if all of its fibers are subsingletons:
```
is-embedding : (A → B) → U ⊔ W⋆
is-embedding f = ∀ b → is-subsingleton (fiber f b)
```

Importantly, embeddings are monic, and invertible functions are embeddings.

**2.5 Lifts**

This section addresses a technical problem that frequently arises when working in a noncumulative universe hierarchy. When we have a type A : U⋆ and need to construct a type in a higher universe V⋆, we use a "lift" operation that embeds A into the higher universe while preserving its structure. The Lift type achieves this and is accompanied by functions lower and lift that mediate between the original and lifted types.

---

### النسخة العربية (الملخص)

**2 المقدمة التمهيدية**

**2.1 المقدمات**

يعرض هذا القسم وحدة Overture.Preliminaries من AgdaUALib. نعرّف أو نستورد هنا الأنواع الأساسية لنظرية أنواع مارتن-لوف (MLTT).

**الأسس المنطقية:** تعتمد AgdaUALib على نظرية أنواع قريبة جداً من تلك التي تعتمد عليها مكتبة Agda الخاصة بطوبولوجيا الأنواع (TypeTopo) لمارتن إسكاردو. الكائنات والافتراضات التي تشكل أساس MLTT قليلة. توجد الأنواع الأولية (0، 1، وℕ، التي تدل على النوع الفارغ، والنوع ذو العنصر الواحد، والأعداد الطبيعية)، ومكوّنات الأنواع (+، Π، Σ، Id، التي تدل على المجموع الثنائي، والجداء، والمجموع، ونوع الهوية). لدينا مجموعة لا نهائية من أكوان الأنواع (أنواع الأنواع). نتبع إسكاردو في الإشارة إلى الأكوان في UALib بأحرف كبيرة خطية: U، V، W، X، Y، Z.

تأتي الدلالات المنطقية من مقابلة القضايا-كأنواع: يتم تمثيل القضايا والمحمولات بالأنواع، وسكان هذه الأنواع هم براهين القضايا والمحمولات. تُبنى البراهين باستخدام قواعد تكوين الأنواع.

نضيف إلى هذا الأساس مبادئ توسعية معينة عند الحاجة. لا تُفترض البديهيات الكلاسيكية مثل بديهية الاختيار أو قانون الوسط المستبعد في أي مكان في المكتبة. جميع المبرهنات والبراهين في UALib بنائية.

**تحديد الأسس المنطقية في Agda:** يبدأ كل برنامج Agda في UALib بـ:
```
{-# OPTIONS --without-K --exact-split --safe #-}
```

تتحكم هذه الخيارات في الافتراضات الأساسية:
1. --without-K يعطّل بديهية K لـ Streicher، مما يجعل Agda متوافقة مع نظريات الأنواع ذات الصلة بالبرهان
2. --exact-split يجعل Agda تقبل فقط التعريفات التي هي مساواة حكمية
3. --safe يضمن عدم افتراض أي شيء بشكل مباشر

**الأكوان في Agda:** نتبنى اصطلاح إسكاردو في الإشارة إلى الأكوان بأحرف كبيرة خطية. يُحوِّل المعامل ⋆ مستوى الكون U إلى النوع Set U. وبالتالي فإن U⋆ هو اسم مستعار لـ Set U.

**الأنواع التابعة:**

*أنواع سيجما (الأزواج التابعة):* بالنظر إلى الأكوان U وV، ونوع A : U⋆، وعائلة أنواع B : A → V⋆، يُرمز لنوع سيجما بـ Σ x : A , B x ويعمم الجداء الديكارتي A × B بالسماح لنوع B x للوسيط الثاني بالاعتماد على القيمة x للأول.

*أنواع باي (الدوال التابعة):* يعمم نوع باي Π x : A , B x نوع الدالة A → B بالسماح لنوع B x للمجال المقابل بالاعتماد على القيمة x لنوع المجال.

**2.2 المساواة**

يغطي هذا القسم المفهوم الأساسي للمساواة التعريفية في MLTT.

**المساواة التعريفية:** يُعرّف بير مارتن-لوف: "المساواة التعريفية هي علاقة التكافؤ التي تُولّد من المبادئ القائلة بأن المُعرَّف يساوي دائماً معرِّفه تعريفياً وأن المساواة التعريفية محفوظة تحت التعويض."

نوع البيانات الذي يمثل المساواة التعريفية:
```
data _≡_ {A : U⋆} : A → A → U⋆ where refl : {x : A} → x ≡ x
```

**الهوية علاقة تكافؤ:** العلاقة ≡ هي بطبيعتها علاقة تكافؤ مع التماثل والتعدية:
```
≡-sym : {x y : A} → x ≡ y → y ≡ x
≡-trans : {x y z : A} → x ≡ y → y ≡ z → x ≡ z
```

**النقل (التعويض):** ميّز تشرتش المساواة بإعلان أن شيئين متساويان إذا وفقط إذا لم تستطع أي خاصية التمييز بينهما. تمثل دالة النقل هذا:
```
transport : {A : U⋆} (B : A → W⋆) {x y : A} → x ≡ y → B x → B y
```

تُظهر دالة ap أن المساواة التعريفية تحقق قاعدة التعويض:
```
ap : {A : U⋆}{B : V⋆} (f : A → B){a b : A} → a ≡ b → f a ≡ f b
```

**2.3 التوسعية الدالية**

ماذا يعني القول بأن دالتين f g : X → Y متساويتان؟ الدوال التي تنتج نفس المخرجات لنفس المدخلات متساوية توسعياً، رغم أنها قد لا تكون متساوية ضمنياً إذا كانت تعريفاتها الداخلية مختلفة.

**أنواع لافتراض التوسعية الدالية:** المساواة النقطية للدوال:
```
_∼_ : {A : U⋆}{B : A → W⋆} → Π B → Π B → U ⊔ W⋆
f ∼ g = ∀ x → f x ≡ g x
```

التوسعية الدالية هي المبدأ القائل بأن الدوال المتساوية نقطياً متساوية تعريفياً: ∀ f g (f ∼ g → f ≡ g). يُمثَّل هذا بنوع dfunext للدوال التابعة:
```
dfunext : ∀ U W → (U ⊔ W)+⋆
dfunext U W = {A : U⋆}{B : A → W⋆}{f g : ∀(x : A) → B x} → f ∼ g → f ≡ g
```

**مهم:** التوسعية الدالية ليست قابلة للإثبات ولا للدحض في نظرية أنواع مارتن-لوف. إنها عبارة مستقلة.

توفر دالة happly العكس:
```
happly : {A : U⋆}{B : A → W⋆}(f g : Π B) → f ≡ g → f ∼ g
```

صياغة بديلة تؤكد أن happly تكافؤ، باستخدام الألياف والأنواع الأحادية:
```
hfunext : ∀ U W → (U ⊔ W)+⋆
hfunext U W = {A : U⋆}{B : A → W⋆} (f g : Π B) → is-equiv (happly f g)
```

**2.4 المعكوسات**

يعرّف هذا القسم الأنواع للصور المعكوسة، والدوال الملحمية (الإغراقية)، والدوال الأحادية (التباينية)، والتضمينات.

**الصور المعكوسة:** يمثل نوع Image الصورة المعكوسة لدالة:
```
data Image_∋_ (f : A → B) : B → U ⊔ W⋆ where
  im : (x : A) → Image f ∋ f x
  eq : (b : B) → (a : A) → b ≡ f a → Image f ∋ b
```

يمكننا حساب معكوس زائف:
```
Inv : (f : A → B){b : B} → Image f ∋ b → A
```

**الدوال الملحمية (الإغراقية):**
```
Epic : (A → B) → U ⊔ W⋆
Epic f = ∀ y → Image f ∋ y
```

يمكن بناء المعكوس الأيمن لدالة ملحمية:
```
EpicInv : (f : A → B) → Epic f → B → A
```

**الدوال الأحادية (التباينية):**
```
Monic : (g : A → B) → U ⊔ W⋆
Monic g = ∀ a1 a2 → g a1 ≡ g a2 → a1 ≡ a2
```

**التضمينات:** الدالة هي تضمين إذا كانت جميع أليافها أحادية جزئية:
```
is-embedding : (A → B) → U ⊔ W⋆
is-embedding f = ∀ b → is-subsingleton (fiber f b)
```

من المهم أن التضمينات أحادية، والدوال القابلة للعكس هي تضمينات.

**2.5 الرفع**

يعالج هذا القسم مشكلة تقنية تظهر بشكل متكرر عند العمل في تسلسل هرمي للأكوان غير تراكمي. عندما يكون لدينا نوع A : U⋆ ونحتاج إلى بناء نوع في كون أعلى V⋆، نستخدم عملية "رفع" تضمّن A في الكون الأعلى مع الحفاظ على بنيته. يحقق نوع Lift هذا ويرافقه دالتان lower وlift تتوسطان بين الأنواع الأصلية والمرفوعة.

---

### Translation Notes

- **Figures referenced:** None
- **Key terms introduced:** MLTT, TypeTopo, Sigma types, Pi types, definitional equality, function extensionality, pointwise equality, transport, happly, dfunext, Epic, Monic, embedding, Lift
- **Equations:** Multiple type signatures and Agda code examples
- **Citations:** References to Escardó [10], Martin-Löf [12], HoTT Book [18]
- **Special handling:** Agda code preserved in monospace format; technical terminology carefully translated while preserving mathematical precision

### Quality Metrics

- Semantic equivalence: 0.87
- Technical accuracy: 0.88
- Readability: 0.86
- Glossary consistency: 0.87
- **Overall section score:** 0.87

### Back-Translation Key Paragraph

English (original): "The AgdaUALib is based on a type theory that is very close to the one on which Martín Escardó's Type Topology (TypeTopo) Agda library is based. The objects and assumptions that form the foundation of MLTT are few. There are the primitive types (0, 1, and ℕ), the type formers (+, Π, Σ, Id), and an infinite collection of type universes."

Arabic translation: "تعتمد AgdaUALib على نظرية أنواع قريبة جداً من تلك التي تعتمد عليها مكتبة Agda الخاصة بطوبولوجيا الأنواع (TypeTopo) لمارتن إسكاردو. الكائنات والافتراضات التي تشكل أساس MLTT قليلة. توجد الأنواع الأولية (0، 1، وℕ)، ومكوّنات الأنواع (+، Π، Σ، Id)، ومجموعة لا نهائية من أكوان الأنواع."

Back-translation: "AgdaUALib is based on a type theory very close to that on which Martín Escardó's Type Topology (TypeTopo) Agda library is based. The objects and assumptions forming the foundation of MLTT are few. There are the primitive types (0, 1, and ℕ), the type formers (+, Π, Σ, Id), and an infinite collection of type universes."

**Verification:** ✓ Semantic equivalence maintained
