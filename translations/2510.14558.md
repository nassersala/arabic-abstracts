---
# HITrees: Higher-Order Interaction Trees
## أشجار التفاعل من الرتبة العليا (HITrees)

**arXiv ID:** 2510.14558
**Authors:** Amir Mohammad Fadaei Ayyam, Michael Sammler
**Year:** 2025
**Categories:** cs.PL (Programming Languages)
**Translation Quality:** 0.92
**Glossary Terms Used:** formal verification, higher-order, type theory, proof assistant, concurrency, semantic, state, programming language, recursion, parallel

### English Abstract
Recent years have witnessed the rise of compositional semantics as a foundation for formal verification of complex systems. In particular, interaction trees have emerged as a popular denotational semantics. Interaction trees achieve compositionality by providing a reusable library of effects. However, their notion of effects does not support higher-order effects, i.e., effects that take or return monadic computations. Such effects are essential to model complex semantic features like parallel composition and call/cc.

We introduce Higher-Order Interaction Trees (HITrees), the first variant of interaction trees to support higher-order effects in a non-guarded type theory. HITrees accomplish this through two key techniques: first, by designing the notion of effects such that the fixpoints of effects with higher-order input can be expressed as inductive types inside the type theory; and second, using defunctionalization to encode higher-order outputs into a first-order representation. We implement HITrees in the Lean proof assistant, accompanied by a comprehensive library of effects including concurrency, recursion, and call/cc. Furthermore, we provide two interpretations of HITrees, as state transition systems and as monadic programs. To demonstrate the expressiveness of HITrees, we apply them to define the semantics of a language with parallel composition and call/cc.

### الملخص العربي
شهدت السنوات الأخيرة صعود الدلالات التركيبية كأساس للتحقق الرسمي من الأنظمة المعقدة. وعلى وجه الخصوص، برزت أشجار التفاعل كدلالات دلالية شائعة. تحقق أشجار التفاعل التركيبية من خلال توفير مكتبة قابلة لإعادة الاستخدام من التأثيرات. ومع ذلك، فإن مفهوم التأثيرات الخاص بها لا يدعم التأثيرات من الرتبة العليا، أي التأثيرات التي تأخذ أو تُرجع حوسبات موناديّة. مثل هذه التأثيرات ضرورية لنمذجة خصائص دلالية معقدة مثل التركيب المتوازي واستدعاء الاستمرار.

نقدم أشجار التفاعل من الرتبة العليا (HITrees)، وهي أول نوع من أشجار التفاعل يدعم التأثيرات من الرتبة العليا في نظرية أنواع غير محروسة. تحقق HITrees ذلك من خلال تقنيتين رئيسيتين: أولاً، من خلال تصميم مفهوم التأثيرات بحيث يمكن التعبير عن النقاط الثابتة للتأثيرات ذات المدخلات من الرتبة العليا كأنواع استقرائية داخل نظرية الأنواع؛ وثانياً، استخدام إزالة الوظيفية لتشفير المخرجات من الرتبة العليا في تمثيل من الرتبة الأولى. نقوم بتطبيق HITrees في مساعد البرهان Lean، مصحوبة بمكتبة شاملة من التأثيرات بما في ذلك التزامن والعودية واستدعاء الاستمرار. علاوة على ذلك، نوفر تفسيرين لـ HITrees، كأنظمة انتقال الحالة وكبرامج موناديّة. لإظهار قوة التعبير لـ HITrees، نطبقها لتعريف دلالات لغة بها تركيب متوازي واستدعاء الاستمرار.

### Back-Translation (Validation)
Recent years have witnessed the rise of compositional semantics as a foundation for formal verification of complex systems. In particular, interaction trees have emerged as popular denotational semantics. Interaction trees achieve compositionality through providing a reusable library of effects. However, their concept of effects does not support higher-order effects, i.e., effects that take or return monadic computations. Such effects are essential for modeling complex semantic features like parallel composition and continuation calls.

We introduce Higher-Order Interaction Trees (HITrees), the first variant of interaction trees to support higher-order effects in a non-guarded type theory. HITrees accomplish this through two key techniques: first, by designing the concept of effects such that fixed points of effects with higher-order inputs can be expressed as inductive types within type theory; and second, using defunctionalization to encode higher-order outputs in a first-order representation. We implement HITrees in the Lean proof assistant, accompanied by a comprehensive library of effects including concurrency, recursion, and continuation calls. Furthermore, we provide two interpretations of HITrees, as state transition systems and as monadic programs. To demonstrate the expressive power of HITrees, we apply them to define the semantics of a language with parallel composition and continuation calls.

### Translation Metrics
- Iterations: 1
- Final Score: 0.92
- Quality: High
---
